<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Happy Rakshabandhan</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <link rel="stylesheet" href="sugar.css">
  <link href="https://fonts.googleapis.com/css2?family=Coiny&family=Titan+One&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nerko+One&family=Sriracha&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
  


  <div id="overlay">
    <h1 id="rakhi-text"></h1>
  </div>

  <div id="content">
    <canvas id="confetti-canvas"></canvas>
    <main>
      <div class="hearts-container"></div>
      <div class="image-wrapper">
        <img src="img/main.png" alt="Image" class="profile-pic" id="profilePic"/>
      </div>

      <div class="about-rakhi">
        <h2>About Rakshabandhan</h2>
        <p>
          Rakshabandhan, also known as Rakhi, is a sacred Hindu festival celebrating 
          the bond between brothers and sisters. On this day, sisters tie a colorful 
          rakhi (sacred thread) around their brothersâ€™ wrists, praying for their well-being, 
          while brothers vow to protect and support their sisters throughout life.
        </p>
      </div>

      <div class="btn" id="btn">
        <img id="gift" src="img/gift.png" alt="Gift" />
      </div>

      <div class="box__letter">
        <div class="letter__border">
          <div class="letter">
            <div class="title__letter"></div>
            <div class="content__letter">
              <div class="left">
                <img id="heart__letter" src="https://media.giphy.com/media/YKUvclrGYmDKXwtphf/giphy.gif" alt="">
                <img class="heart heart_1" style="--t: 0.2s" width="20" src="./images/heart.png" alt="">
                <img class="heart heart_2" style="--t: 0.4s" width="20" src="./images/heart.png" alt="">
                <img class="heart heart_3" style="--t: 0.6s" width="20" src="./images/heart.png" alt="">
                <img class="heart heart_4" style="--t: 0.8s" width="20" src="img/heart.png" alt="">
              </div>
              <div class="right">
                <div class="love__img">
                  <img src="https://media.giphy.com/media/m85llaN7ZkFIHtURiC/giphy.gif" alt="" width="220">
                </div>
                <div class="text__letter">
                  <p></p>
                </div>
                <img id="mewmew" width="80" src="img/mewmew.gif" alt="">
              </div>
            </div>
          </div>
          <div class="close">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
      </div>


    </main>
  </div>
  <audio id="bgMusic" loop autoplay>
    <source src="img/Rakhi-Dhagon-Ka.mp3" type="audio/mpeg">.
</audio>
  <!-- Name input for link generation -->
  <div style="text-align:center; margin:20px;" class="generatelink">
    <p class="text">Apna special link banao â€” naam daalo, share karo, aur dekho magic! Letter me aapka naam chamkega</p>
    <input type="text" id="senderName" placeholder="Enter your name to share" style="padding:5px; font-size:16px;">

    <button onclick="generateLink()" style="padding:6px 12px;">Generate Link</button>
    <p><a id="shareLink" href="#" target="_blank" style="display:block; margin-top:10px; color:red;"></a></p>
  </div>

<!-- Donation section -->
  <div class="donation-container">
    <p class="donation-text">ðŸ’– Aapka chhota sa donation hamare project ko zinda rakhta hai.</p>
    <button class="donate-btn" id="donateBtn">Donate Now</button>
</div>

<!-- Modal -->
<div class="modal" id="qrModal">
    <div class="modal-content">
        <span class="close" id="closeModal">&times;</span>
        <h3>Scan to Donate</h3>
        <img src="img/IMG_5777.jpg" alt="QR Code" class="qr-code">
    </div>
</div>

<div class="footercontaner">
  <footer class="footer">
      <p>Made by Aditya Jyoti</p>
      <div class="social-links">
          <a href="https://github.com/AdityaJyoti2002" target="_blank">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg" alt="GitHub" width="24" class="social-link github">
          </a>
          <a href="https://www.linkedin.com/in/aditya-jyoti-185112259/" target="_blank">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/linkedin/linkedin-original.svg" alt="LinkedIn" width="24" class="social-link linkedin">
          </a>
      </div>
  </footer>
</div>


<script>
// Function to get query parameter
function getQueryParam(param) {
  let params = new URLSearchParams(window.location.search);
  return params.get(param);
}

// Generate shareable link
function generateLink() {
  let nameInput = document.getElementById("senderName").value.trim();
  if (!nameInput) {
    alert("Please enter your name");
    return;
  }
  let url = window.location.origin + window.location.pathname + "?name=" + encodeURIComponent(nameInput);
  let shareLink = document.getElementById("shareLink");
  shareLink.href = url;
  shareLink.textContent = url;
}

const datatxtletter = "Happy Rakshabandhan! Some bonds are not tied by blood, but by moments, care, and quiet understanding. Youâ€™ve always been a calm presence â€” someone who never needed to speak much, yet made things feel better just by being there. On this special day, I just want to thank you for being part of this journey. May your life always be filled with peace, love, and silent strength. No matter where life takes us, this thread of connection will always stay.";
const titleLetter = "For You";

// Get name from URL if available
let name = getQueryParam("name") || "Aditya Jyoti";

const charArrLetter = datatxtletter.split('');
const charArrTitle = titleLetter.split('');

let intervalTitle, intervalLetter;
let timeouts = [];

// Typewriter function
function typeText(chars, selector, speed, callback) {
  let i = 0;
  const interval = setInterval(() => {
    if (i < chars.length) {
      $(selector).append(chars[i++]);
    } else {
      clearInterval(interval);
      if (callback) callback();
    }
  }, speed);
  return interval;
}

function clearAllTimeouts() {
  timeouts.forEach(id => clearTimeout(id));
  timeouts = [];
}

$("#btn").on("click", function () {
  // Sab purane intervals aur timeouts band karo
  clearInterval(intervalTitle);
  clearInterval(intervalLetter);
  clearAllTimeouts();

  // Purana text remove karo
  $(".title__letter").empty();
  $(".text__letter").html("<p></p>");

  // Animation reset
  $("#heart__letter, .love__img, #mewmew").removeClass("animationOp");
  $(".heart").removeClass("animation");

  // Letter box open karo
  $(".box__letter").slideDown();
  timeouts.push(setTimeout(() => $(".letter__border").slideDown(), 1000));

  // Title typing
  timeouts.push(setTimeout(() => {
    intervalTitle = typeText(charArrTitle, ".title__letter", 100, () => {
      $("#heart__letter, .love__img, #mewmew").addClass("animationOp");
      timeouts.push(setTimeout(() => $(".heart").addClass("animation"), 700));
    });
  }, 2000));

  // Letter typing
  timeouts.push(setTimeout(() => {
    intervalLetter = typeText(charArrLetter, ".text__letter p", 50, () => {
      timeouts.push(setTimeout(() => {
        $(".text__letter").append(
          `<p style="margin-top:20px;font-weight:bold;opacity:0;transition:opacity 1s;">â€” ${name}</p>`
        );
        $(".text__letter p:last-child").css("opacity", "1");
      }, 500));
    });
  }, 6000));
});

$(".close").on("click", function () {
  clearInterval(intervalTitle);
  clearInterval(intervalLetter);
  clearAllTimeouts();
  $(".title__letter, .text__letter p").empty();
  $(".box__letter, .letter__border").slideUp();
  $("#heart__letter, .love__img, #mewmew").removeClass("animationOp");
  $(".heart").removeClass("animation");
});



const donateBtn = document.getElementById('donateBtn');
    const qrModal = document.getElementById('qrModal');
    const closeModal = document.getElementById('closeModal');

    donateBtn.addEventListener('click', () => {
        qrModal.style.display = 'flex';
    });

    closeModal.addEventListener('click', () => {
        qrModal.style.display = 'none';
    });

    window.addEventListener('click', (e) => {
        if (e.target === qrModal) {
            qrModal.style.display = 'none';
        }
    });

    const music = document.getElementById('bgMusic');
    music.volume = 0.5;
</script>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
<script src="main.js"></script>
</body>
</html>
